# pico-auth v0.2.0

**Group Management** — Full group CRUD API with membership and JWT integration.

## What's New

This release adds group management to pico-auth. Groups are scoped to organizations, support membership management, and are automatically included in JWT tokens as the `groups` claim.

## Group API Endpoints

| Method | Path | Auth | Description |
|--------|------|------|-------------|
| POST | `/api/v1/groups` | Admin | Create a group |
| GET | `/api/v1/groups` | Bearer | List groups (by org) |
| GET | `/api/v1/groups/{id}` | Bearer | Get group with members |
| PUT | `/api/v1/groups/{id}` | Admin | Update group name/description |
| DELETE | `/api/v1/groups/{id}` | Admin | Delete group (cascades members) |
| POST | `/api/v1/groups/{id}/members` | Admin | Add user to group |
| DELETE | `/api/v1/groups/{id}/members/{uid}` | Admin | Remove user from group |

## JWT Integration

The `groups` claim is now included in access tokens on login and refresh:

```json
{
  "sub": "user-123",
  "email": "alice@example.com",
  "role": "operator",
  "org_id": "default",
  "groups": ["engineering", "platform"],
  "iss": "http://localhost:8100",
  "aud": "pico-bot",
  "iat": 1708000000,
  "exp": 1708000900,
  "jti": "a1b2c3d4e5f6"
}
```

## New Components

- **`Group`** — SQLAlchemy entity (`groups` table)
- **`GroupMember`** — SQLAlchemy entity (`group_members` table, composite PK)
- **`GroupRepository`** — Data access for groups and membership
- **`GroupService`** — Business logic (create, list, update, delete, add/remove members)
- **`GroupController`** — REST controller at `/api/v1/groups`

## New Error Types

- `GroupNotFoundError` — Group does not exist
- `GroupExistsError` — Duplicate group name within org
- `MemberAlreadyInGroupError` — User already in the group
- `MemberNotInGroupError` — User not in the group

## Dependencies

- pico-ioc[yaml] >= 2.2.4
- pico-boot >= 0.1.1
- pico-fastapi >= 0.3.0
- pico-sqlalchemy >= 0.3.0
- pico-client-auth >= 0.3.0

## Compatibility

- Python 3.11, 3.12, 3.13, 3.14
- Fully backward-compatible — existing auth endpoints unchanged
